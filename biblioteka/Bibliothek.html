<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>BIBLIOTEKA</title>
	<script>
		var BookList = [];
		var SearchFor = '';
		BookList = JSON.parse(localStorage.getItem('ListofBooks'));
		function show() {
			var Added = 0;
			SearchFor = document.getElementById('Input1').value;
			
			resetid();
			for(i = 0; i < BookList.length ; i++) {
				if(SearchByid(i,SearchFor) == 1) {
					Added++;
					BookList[i].id = Added;
					var NewBook = 'TytuÅ‚: ' + BookList[i].name + ' Autor: ' + BookList[i].author + ' ISBN: ' +  BookList[i].isbn1;
					CreateText(NewBook,Added);
					CreateEditButton(i,Added);
					CreateTakeButton(i,Added);
				}
			}
		}
		function resetid() {
			for(i = 0 ; i < BookList.length ; i++){
				BookList[i].id = 0;
			}
			for(i = 0 ; i <= BookList.length ; i++) {
				var element1 = document.getElementById(i);
				if(element1 != null)
					element1.remove();
					var element1 = document.getElementById(i);
				if(element1 != null)
					element1.remove();
					var element1 = document.getElementById(i);
				if(element1 != null)
					element1.remove();
			}
				
		}
		function SearchByid(Num,Key) {
			var KeyLength = Key.length;
			
			var Text1 = BookList[Num].name;
			
			var Text2 = BookList[Num].author;
			
			var Text3 = BookList[Num].isbn1;	
			for(m = 0 ; m < Text1.length ; m++) {
				var j = m - 1 + KeyLength;
				if(j < Text1.length) {
					var Str = '';
					for(k = m ; k <= j ; k++)
						Str = Str + Text1[k];
					if(Str == Key)
						return 1;
				}
			}
			for(m = 0 ; m < Text2.length ; m++) {
				var j = m - 1 + KeyLength;
				if(j < Text2.length) {
					var Str = '';
					for(k = m ; k <= j ; k++)
						Str = Str + Text2[k];
					if(Str == Key)
						return 1;
				}
			}
			for(m = 0 ; m < Text3.length ; m++) {
				var j = m - 1 + KeyLength;
				if(j < Text3.length) {
					var Str = '';
					for(k = m ; k <= j ; k++)
						Str = Str + Text3[k];
					if(Str == Key)
						return 1;
				}
			}
			return 0;
		}
		function CreateText(text,id1) {
			newTodo = document.createElement("div");
			newTodo.innerHTML = text;
			newTodo.setAttribute("id",id1);
			document.body.appendChild(newTodo);
		}
		function CreateEditButton(id1) {
			newButton = document.createElement('button');
			newButton.innerHTML = 'EDYTUJ';
			newButton.setAttribute("id",id1);
			newButton.setAttribute("onclick",'Edit(this.id)');
			document.body.appendChild(newButton);
		}
		function CreateTakeButton(id1) {
			newButton = document.createElement('button');
			newButton.innerHTML = 'WYPOZYCZ';
			newButton.setAttribute("id",id1);
			newButton.setAttribute("onclick",'Take(this.id)');
			document.body.appendChild(newButton);
		}
		function Edit(id) {
			//
		}
		function Take(id) {
			//
		}
	</script>
  </head>
  <body onload="show()">
    <div>
		<input id='Input1'>
		<div>
		<button onclick='show()'> SZUKAJ </button>
		<div>
		<div id='todolist'></div>
		<a href="Main.html">POWROT</a>
	</div>
  </body>
</html>
	